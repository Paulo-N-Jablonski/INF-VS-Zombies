#include "raylib.h"
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <time.h>

#define LINHAS 5
#define COLUNAS 9
#define ALTURA_GRADE 96
#define LARGURA_GRADE 72

typedef enum { MENU, JOGANDO, TABELA_LIDER, FIM_DE_JOGO } GameState;

GameState currentState = MENU;

void desenharMenuPrincipal() {
    ClearBackground(RAYWHITE);

    DrawText("Criador: Paulo Nata Jablonski - Turma D", 2, 590, 10, BLACK);
    DrawText("INF Vs Zombies", 145, 110, 40, DARKGREEN);

    // botão novo-jogo
    if (CheckCollisionPointRec(GetMousePosition(), (Rectangle){150, 200, 300, 50})) {
        DrawRectangle(150, 200, 300, 50, LIGHTGRAY);
        if (IsMouseButtonPressed(MOUSE_BUTTON_LEFT)) {
            currentState = JOGANDO;
        }
    } else {
        DrawRectangle(150, 200, 300, 50, LIME);
    }
    DrawText("Jogar", 265, 210, 30, WHITE);

    // botão continuar jogando
    if (CheckCollisionPointRec(GetMousePosition(), (Rectangle){150, 270, 300, 50})) {
        DrawRectangle(150, 270, 300, 50, LIGHTGRAY);
        if (IsMouseButtonPressed(MOUSE_BUTTON_LEFT)) {
            //currentState = JOGANDO;
        }
    } else {
        DrawRectangle(150, 270, 300, 50, LIME);
    }
    DrawText("[TESTE]", 240, 280, 30, WHITE);

    // botão da tabela de lideres
    if(CheckCollisionPointRec(GetMousePosition(), (Rectangle){150, 340, 300, 50})) {
        DrawRectangle(150, 340, 300, 50, LIGHTGRAY);
        if (IsMouseButtonPressed(MOUSE_BUTTON_LEFT)) {
            currentState = TABELA_LIDER;
        }
    } else {
        DrawRectangle(150, 340, 300, 50, LIME);
    }
    DrawText("Tabela de Lideres", 162, 350, 30, WHITE);

    // botão sair
    if (CheckCollisionPointRec(GetMousePosition(), (Rectangle){150, 410, 300, 50})) {
        DrawRectangle(150, 410, 300, 50, LIGHTGRAY);
        if (IsMouseButtonPressed(MOUSE_BUTTON_LEFT)) {
            CloseWindow();
        }
    } else {
        DrawRectangle(150, 410, 300, 50, LIME);
    }
    DrawText("Sair", 280, 420, 30, WHITE);
}

void desenharJogando(){
    ClearBackground(RAYWHITE);

    // Draw vertical lines (columns)
    for (int i = 0; i <= COLUNAS; i++) {
        DrawLine(i * ALTURA_GRADE, 0, i * ALTURA_GRADE, GetScreenHeight(), BLACK);
    }

    // Draw horizontal lines (rows)
    for (int j = 0; j <= LINHAS; j++) {
        DrawLine(0, j * LARGURA_GRADE, GetScreenWidth(), j * LARGURA_GRADE, BLACK);
    }
}

int main(void) {
    const int screenWidth = 1280;
    const int screenHeight = 600;
    InitWindow(screenWidth, screenHeight, "INF VS Zombies");

    SetTargetFPS(60);

    while (!WindowShouldClose())
    {
        switch (currentState) {
            case MENU:
                ClearBackground(RAYWHITE);
                desenharMenuPrincipal();
                break;

            case JOGANDO:
                // a fazer
                desenharJogando();
                break;

            case TABELA_LIDER:
                ClearBackground(RAYWHITE);
                // a fazer
                break;

            case FIM_DE_JOGO: //para quando perder
                ClearBackground(RED);
                DrawText("Fim de Jogo", 350, 150, 40, WHITE);
                break;
        }

        EndDrawing();
    }

    CloseWindow();

    return 0;
}
